function isEmpty(a){for(let b in a)return!1;return!0}async function storageGet(a){try{null!==a&&(a+="");let b;return CHROME?(await browser.storage.local.get(null===a?null:a,function(c){b=null===a?c:c[a]}),b):(b=await browser.storage.local.get(null===a?null:a),null===a?b:b[a])}catch(a){console.error(a)}}async function storageSet(a,b){try{return await browser.storage.local.set(null===a?b:{[a]:b})}catch(a){console.error(a)}}async function loadOptions(){let a=await storageGet("options");return void 0===a?(vNotify.info({title:"First time using MyMangaDex",text:"It looks like it is your first time using MyMangaDex, for any help go to https://github.com/Glagan/MyMangaDex, and don't forget to look at the settings !",sticky:!0}),await storageSet("options",defaultOptions),JSON.parse(JSON.stringify(defaultOptions))):(a.version<defaultOptions.version&&(1.7>a.version&&(a.auto_md_list=!1),1.8>a.version&&(a={lastReadColor:a.colors.last_read,lowerChaptersColor:a.colors.lower_chapter,lastOpenColors:a.colors.last_open,openedChaptersColor:a.colors.opened_chapters,hideLowerChapters:a.hide_lower,saveOnlyHigher:a.last_only_higher,saveAllOpened:a.save_all_opened,maxChapterSaved:a.max_save_opened,updateMDList:a.auto_md_list,showTooltips:!0}),1.9>a.version&&(a.highlightChapters=defaultOptions.highlightChapters,a.showNotifications=defaultOptions.showNotifications,a.version=1.9,vNotify.info({title:"MyMangaDex as been updated to 1.9",text:"You can see the changelog on https://github.com/Glagan/MyMangaDex, new Options have been added, you should check them out !"})),await storageSet("options",a)),a)}async function updateLocalStorage(a,b){var c=Math.max;a.lastMangaDexChapter=b.saveOnlyHigher?c(a.lastMangaDexChapter,a.currentChapter.chapter):a.currentChapter.chapter,await storageSet(a.mangaDexId,{mal:a.myAnimeListId,last:a.lastMangaDexChapter,chapters:a.chapters}),b.showNotifications&&0==a.myAnimeListId&&a.currentChapter.chapter>a.lastMangaDexChapter&&vNotify.success({title:"Manga updated",text:a.name+" last open Chapter as been updated to "+a.lastMangaDexChapter,image:"https://mangadex.org/images/manga/"+a.mangaDexId+".thumb.jpg"})}function clearDomNode(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function uniqueGUID(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}