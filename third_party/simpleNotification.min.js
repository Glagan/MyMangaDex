class SimpleNotification{static options(a){SimpleNotification.default=Object.assign({},SimpleNotification.default,a)}static makeWrapper(a){let b=document.createDocumentFragment(),c=document.createElement("div");c.className="gn-wrapper gn-"+a,b.appendChild(c),document.body.appendChild(b),SimpleNotification.wrappers[a]=c}static firstUnbreakChar(a,b,c=0){0>c&&(c=0);let d;for(;0<=c;)d=a.indexOf(b,c),c=0<d&&"\\"==a[d-1]?d+1:-1;return d}static treeFromText(a,b){b=b.replace(/(\r?\n|\r)/gm,"\n");let c=[],d=0;if(Object.keys(SimpleNotification.tags).forEach(a=>{let e,f,g=SimpleNotification.tags[a],h=0,i={open:g.open.length,close:g.close.length};for(;-1<(e=b.indexOf(g.open,h));){if(e+=i.open,-1<(f=b.indexOf(g.close,e))&&e!=f){let h={type:a,content:b.substring(e,f)};if(void 0!==g.title&&0<h.content.length)if("!"==h.content[0])h.content=h.content.substring(1);else{let a=SimpleNotification.firstUnbreakChar(h.content,":");h.content=h.content.replace("\\:",":"),-1<a&&(h.title=h.content.substring(0,a),h.content=h.content.substring(a+1))}c.push(h);let j=b.substring(0,e-i.open)+"\\"+d+"\\"+b.substring(f+i.close);b=j,d++}h=e}}),0<c.length){let d=b.split(/\\(\d+)\\/),e=d.length;for(let b=0;b<e;b++)if(0==b%2)a.appendChild(document.createTextNode(d[b]));else{let e=c[parseInt(d[b])],f=SimpleNotification.tags[e.type],g=document.createElement(f.type);null!=f.set&&g.setAttribute(f.set,e.content),void 0!==e.title&&"content"==f.title?g.textContent=e.title:(g.textContent=e.content,void 0!==e.title&&void 0!==f.title&&g.setAttribute(f.title,e.title)),g.className=f.class||"",a.appendChild(g)}}else a.textContent=b}static addExtinguish(a){a.target.lastElementChild.classList.add("gn-extinguish")}static removeExtinguish(a){a.target.lastElementChild.classList.remove("gn-extinguish")}static create(a,b,c,d){if((null==b||""==b)&&(null==c||""==c))return;let e=Object.assign({},SimpleNotification.default,d);null==SimpleNotification.wrappers[e.position]&&SimpleNotification.makeWrapper(e.position);let f=document.createDocumentFragment(),g=document.createElement("div");if(g.addEventListener("click",()=>{SimpleNotification.destroy(g,0)}),e.sticky||(g.addEventListener("mouseenter",SimpleNotification.removeExtinguish),g.addEventListener("mouseleave",SimpleNotification.addExtinguish)),g.className="gn-notification gn-insert",a.forEach(a=>{g.classList.add(a)}),null!=b&&""!=b){let a=document.createElement("h1");a.title=b,a.textContent=b,g.appendChild(a)}let h=null!=e.image&&""!=e.image,i=null!=c&&""!=c;if(h||i){let a=document.createElement("div");if(a.className="gn-content",h){let b=document.createElement("img");b.src=e.image,a.appendChild(b)}if(i){let b=document.createElement("p");SimpleNotification.treeFromText(b,c),a.appendChild(b)}g.appendChild(a)}let j;if(null==e.sticky||!1==e.sticky){j=document.createElement("span"),j.className="gn-lifespan";let a=b=>{if("insert-left"==b.animationName||"insert-right"==b.animationName){if(j.style.animationDuration=e.duration+"ms",document.hasFocus())j.classList.add("gn-extinguish");else{let a=()=>{j.classList.add("gn-extinguish"),document.removeEventListener("focus",a)};document.addEventListener("focus",a)}j.addEventListener("animationend",a=>{"shorten"==a.animationName&&SimpleNotification.destroy(g,e.fadeout)}),g.classList.remove("gn-insert"),g.removeEventListener("animationend",a)}};g.addEventListener("animationend",a),g.appendChild(j)}f.appendChild(g),SimpleNotification.wrappers[e.position].appendChild(f)}static addTag(a,b){SimpleNotification.tags[a]=b}static destroy(a,b){0==b&&a.parentElement.removeChild(a),a.removeEventListener("mouseenter",SimpleNotification.removeExtinguish),a.removeEventListener("mouseleave",SimpleNotification.addExtinguish),a.style.animationDuration=b+"ms",a.classList.add("gn-fadeout"),a.addEventListener("mouseenter",a=>{a.target.classList.remove("gn-fadeout")}),a.addEventListener("mouseleave",a=>{a.target.classList.add("gn-fadeout")}),a.addEventListener("animationend",b=>{"fadeout"==b.animationName&&a.parentElement.removeChild(a)})}static success(a,b,c={}){return SimpleNotification.create(["gn-success"],a,b,c)}static info(a,b,c={}){return SimpleNotification.create(["gn-info"],a,b,c)}static error(a,b,c={}){return SimpleNotification.create(["gn-error"],a,b,c)}static warning(a,b,c={}){return SimpleNotification.create(["gn-warning"],a,b,c)}static message(a,b,c={}){return SimpleNotification.create(["gn-message"],a,b,c)}static custom(a,b,c,d){return SimpleNotification.create(a,b,c,d)}}SimpleNotification.wrappers={},SimpleNotification.default={image:void 0,position:"top-right",duration:4e3,fadeout:750,sticky:!1},SimpleNotification.tags={code:{type:"code",class:"gn-code",open:"``",close:"``"},header3:{type:"h3",class:"gn-header",open:"##",close:"\n"},header2:{type:"h2",class:"gn-header",open:"#",close:"\n"},link:{type:"a",set:"href",title:"content",open:"{{",close:"}}"},bold:{type:"span",class:"gn-bold",open:"**",close:"**"},italic:{type:"span",class:"gn-italic",open:"*",close:"*"}};